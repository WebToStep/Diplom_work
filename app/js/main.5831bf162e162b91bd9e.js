(()=>{"use strict";const e=e=>e.forEach((e=>{e.classList.add("show_block"),e.classList.remove("hidden_block")})),t=e=>e.forEach((e=>{e.classList.remove("show_block"),e.classList.add("hidden_block")})),o=document.querySelector(".smooth-scroll"),l=e=>o.style.display=e,n=e=>{const t=document.querySelectorAll(".count_1"),o=document.querySelectorAll(".count_2"),l=document.querySelectorAll(".count_3"),n=document.querySelectorAll(".count_4"),a=()=>{const a=(new Date(e).getTime()-(new Date).getTime())/1e3,c=("0"+Math.floor(a%60)).slice(-2),s=("0"+Math.floor(a/60%60)).slice(-2),r=("0"+Math.floor(a/60/60%24)).slice(-2),i=("0"+Math.floor(a/60/60/24)).slice(-2);return t.forEach((e=>{e.lastChild.textContent=i})),o.forEach((e=>{e.lastChild.textContent=r})),l.forEach((e=>{e.lastChild.textContent=s})),n.forEach((e=>{e.lastChild.textContent=c})),a};(()=>{let e;a()>0?e=setInterval(a,1e3):(clearInterval(e),t.textContent="00",o.textContent="00",l.textContent="00",n.textContent="00")})()},a=document.getElementById("calc-type"),c=document.getElementById("calc-type-material"),s=document.getElementById("calc-input"),r=document.getElementById("calc-total");function i(e,t="+7 (___) ___-__-__"){const o=document.querySelectorAll(`input[name="${e}"]`);function l(e){const o=e.keyCode,l=t,n=l.replace(/\D/g,""),a=this.value.replace(/\D/g,"");let c=0,s=l.replace(/[_\d]/g,(e=>c<a.length?a.charAt(c++)||n.charAt(c):e));c=s.indexOf("_"),-1!=c&&(s=s.slice(0,c));let r=l.substr(0,this.value.length).replace(/_+/g,(e=>"\\d{1,"+e.length+"}")).replace(/[+()]/g,"\\$&");r=new RegExp("^"+r+"$"),(!r.test(this.value)||this.value.length<5||o>47&&o<58)&&(this.value=s),"blur"==e.type&&this.value.length<5&&(this.value="")}for(const e of o)e.addEventListener("input",l),e.addEventListener("focus",l),e.addEventListener("blur",l)}i("селектор элементов","маска, если маску не передать то будет работать стандартная +7 (___) ___-__-__"),document.addEventListener("DOMContentLoaded",(()=>{const o=document.getElementById("offer"),d=document.querySelector(".overlay"),u=document.querySelector(".header-modal"),m=document.querySelector(".services-modal");l("none"),i("phone"),void 0===localStorage.startTimer?(localStorage.startTimer=((e,t)=>{const o=new Date(e);return o.setDate(o.getDate()+3),o})(new Date),n(localStorage.startTimer)):n(localStorage.startTimer),document.addEventListener("click",(o=>{const l=o.target,n=e=>e.trim().toLocaleLowerCase();l.classList.contains("fancyboxModal")&&(o.preventDefault(),n(l.innerText)===n("ЗАКАЗАТЬ ЗВОНОК!")||n(l.innerText)===n("УЗНАТЬ СВОЮ СКИДКУ")?e([d,u]):e([d,m])),l.classList.contains("header-modal__close")?t([d,u]):l.classList.contains("services-modal__close")&&t([d,m]),l.classList.contains("overlay")&&(t([d,u]),t([d,m])),l.classList.contains("smooth-scroll__img")&&window.scrollTo({top:0,behavior:"smooth"})})),document.addEventListener("input",(e=>{e.target.closest("#calc")&&(()=>{if(Number(a.value)&&Number(c.value)&&Number(s.value)){const e=Math.floor(a.value*c.value*s.value*1e3);r.value=e,localStorage.setItem("calc",e)}})()})),window.addEventListener("scroll",(()=>{o.getBoundingClientRect().bottom<0?window.requestAnimationFrame((()=>{l("block")})):window.requestAnimationFrame((()=>{l("none")}))}))}))})();